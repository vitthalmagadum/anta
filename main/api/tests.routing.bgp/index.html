
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arista Network Test Automation">
      
      
        <meta name="author" content="Khelil Sator">
      
      
      
        <link rel="prev" href="../tests.routing.generic/">
      
      
        <link rel="next" href="../tests.routing.ospf/">
      
      
      <link rel="icon" href="../../imgs/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>BGP - Arista Network Test Automation - ANTA</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.material.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: none; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  <div id="current-version"> </div>
  <script>
          let message = "You're not viewing the latest version."
          // There is probably a nicer method retrieving the value of the
          // version element but it is loaded after the outdated block
          let current = window.location.pathname.split("/")[1]
          if (current == "main") {
                message = "This is the documentation from the 'main' branch which is not a stable release."
          }
          message = message + '<a href="../../.."> <strong>Click here to go to latest stable release.</strong> </a>'
          document.getElementById("current-version").innerHTML = message;
   </script>
  

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Arista Network Test Automation - ANTA" class="md-header__button md-logo" aria-label="Arista Network Test Automation - ANTA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 64h128v64H256zM240 0c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h48v32H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96v32H80c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h160c26.5 0 48-21.5 48-48v-96c0-26.5-21.5-48-48-48h-48v-32h256v32h-48c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h160c26.5 0 48-21.5 48-48v-96c0-26.5-21.5-48-48-48h-48v-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352v-32h48c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM96 448v-64h128v64zm320-64h128v64H416z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Arista Network Test Automation - ANTA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              BGP
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aristanetworks/anta" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ANTA on Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Arista Network Test Automation - ANTA" class="md-nav__button md-logo" aria-label="Arista Network Test Automation - ANTA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 64h128v64H256zM240 0c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h48v32H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96v32H80c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h160c26.5 0 48-21.5 48-48v-96c0-26.5-21.5-48-48-48h-48v-32h256v32h-48c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h160c26.5 0 48-21.5 48-48v-96c0-26.5-21.5-48-48-48h-48v-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352v-32h48c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM96 448v-64h128v64zm320-64h128v64H416z"/></svg>

    </a>
    Arista Network Test Automation - ANTA
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aristanetworks/anta" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ANTA on Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements-and-installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage-inventory-catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventory and Test catalog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ANTA CLI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            ANTA CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/nrfu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NRFU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/exec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/inv-from-cvp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventory from CVP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/inv-from-ansible/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventory from Ansible
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/get-inventory-information/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Inventory Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/check/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Check commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/tag-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tag Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced Usages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced Usages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usages/caching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Caching in ANTA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usages/custom-tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing ANTA tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usages/as-python-lib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ANTA as a Python Library
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tests Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Tests Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.aaa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AAA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.avt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adaptive Virtual Topology
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.bfd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BFD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.connectivity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connectivity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.field_notices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Field Notices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.flow_tracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flow Tracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.greent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GreenT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interfaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.lanz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LANZ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.mlag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MLAG
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.multicast/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multicast
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.profiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.ptp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.path_selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Router Path Selection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_19" checked>
        
          
          <label class="md-nav__link" for="__nav_7_19" id="__nav_7_19_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Routing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_19_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_19">
            <span class="md-nav__icon md-icon"></span>
            Routing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.routing.generic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    BGP
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    BGP
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPAdvCommunities
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPAdvCommunities">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPExchangedRoutes
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPExchangedRoutes">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpNeighbor
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerASNCap
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerASNCap">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerCount" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerCount
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerCount">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerCount-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerCount-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpAfi
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerDropStats
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerDropStats">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerMD5Auth
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerMD5Auth">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerMPCaps
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerMPCaps">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerRouteLimit
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerRouteLimit">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerRouteRefreshCap
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerRouteRefreshCap">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerUpdateErrors
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerUpdateErrors">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeersHealth
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeersHealth">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpAfi
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPSpecificPeers
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPSpecificPeers">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpAfi
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPTimers" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPTimers
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPTimers">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPTimers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPTimers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBgpRouteMaps
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBgpRouteMaps">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyEVPNType2Route" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyEVPNType2Route
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyEVPNType2Route">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyEVPNType2Route-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyEVPNType2Route-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        VxlanEndpoint
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp._add_bgp_failures" class="md-nav__link">
      <span class="md-ellipsis">
        _add_bgp_failures
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp._add_bgp_routes_failure" class="md-nav__link">
      <span class="md-ellipsis">
        _add_bgp_routes_failure
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp._check_peer_issues" class="md-nav__link">
      <span class="md-ellipsis">
        _check_peer_issues
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.routing.ospf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OSPF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.routing.isis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISIS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.snmp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SNMP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.stp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.stun/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STUN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.vxlan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VXLAN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests.vlan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VLAN
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../device/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Device
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Inventory
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            Inventory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inventory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventory module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inventory.models.input/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventory models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Test
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            Test
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input Types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" >
        
          
          <label class="md-nav__link" for="__nav_8_5" id="__nav_8_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Result Manager
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_5">
            <span class="md-nav__icon md-icon"></span>
            Result Manager
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../result_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Result Manager module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../result_manager_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Result Manager models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../report_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../runner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Runner
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting ANTA
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPAdvCommunities
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPAdvCommunities">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPExchangedRoutes
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPExchangedRoutes">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpNeighbor
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerASNCap
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerASNCap">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerCount" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerCount
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerCount">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerCount-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerCount-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpAfi
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerDropStats
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerDropStats">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerMD5Auth
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerMD5Auth">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerMPCaps
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerMPCaps">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerRouteLimit
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerRouteLimit">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerRouteRefreshCap
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerRouteRefreshCap">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeerUpdateErrors
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeerUpdateErrors">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPPeersHealth
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPPeersHealth">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpAfi
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPSpecificPeers
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPSpecificPeers">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpAfi
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPTimers" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBGPTimers
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBGPTimers">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPTimers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBGPTimers-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyBgpRouteMaps
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyBgpRouteMaps">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        BgpPeer
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyEVPNType2Route" class="md-nav__link">
      <span class="md-ellipsis">
        VerifyEVPNType2Route
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="VerifyEVPNType2Route">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyEVPNType2Route-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        Inputs
      </span>
    </a>

    <!-- Table of contents list -->
    
      <nav class="md-nav" aria-label="Inputs">
        <ul class="md-nav__list">
          
          
            <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp.VerifyEVPNType2Route-attributes" class="md-nav__link">
      <span class="md-ellipsis">
        VxlanEndpoint
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
          
          
        </ul>
      </nav>
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp._add_bgp_failures" class="md-nav__link">
      <span class="md-ellipsis">
        _add_bgp_failures
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp._add_bgp_routes_failure" class="md-nav__link">
      <span class="md-ellipsis">
        _add_bgp_routes_failure
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
      
        <!-- Courtesy of https://github.com/squidfunk/mkdocs-material/issues/4827#issuecomment-1869812019 -->
<li class="md-nav__item">
    <a href="#anta.tests.routing.bgp._check_peer_issues" class="md-nav__link">
      <span class="md-ellipsis">
        _check_peer_issues
      </span>
    </a>

    <!-- Table of contents list -->
    
  </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  
    <h1>ANTA catalog for BGP tests</h1>
  

<!--
  ~ Copyright (c) 2023-2024 Arista Networks, Inc.
  ~ Use of this source code is governed by the Apache License 2.0
  ~ that can be found in the LICENSE file.
  -->



<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">
  



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPAdvCommunities" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPAdvCommunities</span>


<a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies if the advertised communities of BGP peers are standard, extended, and large in the specified VRF.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the advertised communities of BGP peers are standard, extended, and large in the specified VRF.</li>
<li>Failure: The test will fail if the advertised communities of BGP peers are not standard, extended, and large in the specified VRF.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPAdvCommunities</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.17</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.21</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPAdvCommunities.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPAdvCommunities-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPAdvCommunities</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if the advertised communities of BGP peers are standard, extended, and large in the specified VRF.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the advertised communities of BGP peers are standard, extended, and large in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if the advertised communities of BGP peers are not standard, extended, and large in the specified VRF.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPAdvCommunities:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.17</span>
<span class="sd">                vrf: default</span>
<span class="sd">              - peer_address: 172.30.11.21</span>
<span class="sd">                vrf: default</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPAdvCommunities&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the advertised communities of a BGP peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaCommand</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors vrf all&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPAdvCommunities test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPAdvCommunities.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Iterate over each bgp peer</span>
        <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">peer</span><span class="p">:</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{}}}}</span>

            <span class="c1"># Verify BGP peer</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># Verify BGP peer&#39;s advertised communities</span>
            <span class="n">bgp_output</span> <span class="o">=</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;advertisedCommunities&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">bgp_output</span><span class="p">[</span><span class="s2">&quot;standard&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">bgp_output</span><span class="p">[</span><span class="s2">&quot;extended&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">bgp_output</span><span class="p">[</span><span class="s2">&quot;large&quot;</span><span class="p">]:</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;advertised_communities&quot;</span><span class="p">:</span> <span class="n">bgp_output</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peers are not configured or advertised communities are not standard, extended, and large:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPExchangedRoutes" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPExchangedRoutes</span>


<a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies if the BGP peers have correctly advertised and received routes.</p>
<p>The route type should be &lsquo;valid&rsquo; and &lsquo;active&rsquo; for a specified VRF.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: If the BGP peers have correctly advertised and received routes of type &lsquo;valid&rsquo; and &lsquo;active&rsquo; for a specified VRF.</li>
<li>Failure: If a BGP peer is not found, the expected advertised/received routes are not found, or the routes are not &lsquo;valid&rsquo; or &lsquo;active&rsquo;.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPExchangedRoutes</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.255.5</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">advertised_routes</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.254.5/32</span>
<span class="w">            </span><span class="nt">received_routes</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.255.4/32</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.255.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">advertised_routes</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.255.1/32</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.254.5/32</span>
<span class="w">            </span><span class="nt">received_routes</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.254.3/32</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPExchangedRoutes.Input.BgpNeighbor">BgpNeighbor</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP neighbors.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes">BgpNeighbor<a href="#anta.tests.routing.bgp.VerifyBGPExchangedRoutes-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>advertised_routes</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" title="ipaddress.IPv4Network" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Network">IPv4Network</a>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of advertised routes in CIDR format.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>received_routes</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" title="ipaddress.IPv4Network" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Network">IPv4Network</a>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of received routes in CIDR format.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPExchangedRoutes</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if the BGP peers have correctly advertised and received routes.</span>

<span class="sd">    The route type should be &#39;valid&#39; and &#39;active&#39; for a specified VRF.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: If the BGP peers have correctly advertised and received routes of type &#39;valid&#39; and &#39;active&#39; for a specified VRF.</span>
<span class="sd">    * Failure: If a BGP peer is not found, the expected advertised/received routes are not found, or the routes are not &#39;valid&#39; or &#39;active&#39;.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPExchangedRoutes:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.255.5</span>
<span class="sd">                vrf: default</span>
<span class="sd">                advertised_routes:</span>
<span class="sd">                  - 192.0.254.5/32</span>
<span class="sd">                received_routes:</span>
<span class="sd">                  - 192.0.255.4/32</span>
<span class="sd">              - peer_address: 172.30.255.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                advertised_routes:</span>
<span class="sd">                  - 192.0.255.1/32</span>
<span class="sd">                  - 192.0.254.5/32</span>
<span class="sd">                received_routes:</span>
<span class="sd">                  - 192.0.254.3/32</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPExchangedRoutes&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the advertised and received routes of BGP peers.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors </span><span class="si">{peer}</span><span class="s2"> advertised-routes vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors </span><span class="si">{peer}</span><span class="s2"> routes vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPExchangedRoutes test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpNeighbor</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP neighbors.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpNeighbor</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP neighbor.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">advertised_routes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">IPv4Network</span><span class="p">]</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;List of advertised routes in CIDR format.&quot;&quot;&quot;</span>
            <span class="n">received_routes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">IPv4Network</span><span class="p">]</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;List of received routes in CIDR format.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP neighbor in the input list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">peer</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">),</span> <span class="n">vrf</span><span class="o">=</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">]</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPExchangedRoutes.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Iterating over command output for different peers</span>
        <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">:</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">peer</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vrf</span>
            <span class="k">for</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">input_entry</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span> <span class="o">==</span> <span class="n">peer</span> <span class="ow">and</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">vrf</span> <span class="o">==</span> <span class="n">vrf</span><span class="p">:</span>
                    <span class="n">advertised_routes</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">advertised_routes</span>
                    <span class="n">received_routes</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">received_routes</span>
                    <span class="k">break</span>
            <span class="n">failure</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">}</span>

            <span class="c1"># Verify if a BGP peer is configured with the provided vrf</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_routes</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.bgpRouteEntries&quot;</span><span class="p">)):</span>
                <span class="n">failure</span><span class="p">[</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Not configured&quot;</span>
                <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="n">failure</span>
                <span class="k">continue</span>

            <span class="c1"># Validate advertised routes</span>
            <span class="k">if</span> <span class="s2">&quot;advertised-routes&quot;</span> <span class="ow">in</span> <span class="n">command</span><span class="o">.</span><span class="n">command</span><span class="p">:</span>
                <span class="n">failure_routes</span> <span class="o">=</span> <span class="n">_add_bgp_routes_failure</span><span class="p">(</span><span class="n">advertised_routes</span><span class="p">,</span> <span class="n">bgp_routes</span><span class="p">,</span> <span class="n">peer</span><span class="p">,</span> <span class="n">vrf</span><span class="p">)</span>

            <span class="c1"># Validate received routes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">failure_routes</span> <span class="o">=</span> <span class="n">_add_bgp_routes_failure</span><span class="p">(</span><span class="n">received_routes</span><span class="p">,</span> <span class="n">bgp_routes</span><span class="p">,</span> <span class="n">peer</span><span class="p">,</span> <span class="n">vrf</span><span class="p">,</span> <span class="n">route_type</span><span class="o">=</span><span class="s2">&quot;received_routes&quot;</span><span class="p">)</span>
            <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure_routes</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peers are not found or routes are not exchanged properly:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerASNCap" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerASNCap</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the four octet asn capabilities of a BGP peer in a specified VRF.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if BGP peer&rsquo;s four octet asn capabilities are advertised, received, and enabled in the specified VRF.</li>
<li>Failure: The test will fail if BGP peers are not found or four octet asn capabilities are not advertised, received, and enabled in the specified VRF.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerASNCap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerASNCap.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerASNCap-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerASNCap</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the four octet asn capabilities of a BGP peer in a specified VRF.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if BGP peer&#39;s four octet asn capabilities are advertised, received, and enabled in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if BGP peers are not found or four octet asn capabilities are not advertised, received, and enabled in the specified VRF.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerASNCap:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerASNCap&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the four octet asn capabilities of a BGP peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaCommand</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors vrf all&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerASNCap test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerASNCap.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Iterate over each bgp peer</span>
        <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">peer</span><span class="p">:</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{}}}}</span>

            <span class="c1"># Check if BGP output exists</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">bgp_output</span> <span class="o">=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;neighborCapabilities.fourOctetAsnCap&quot;</span><span class="p">)</span>

            <span class="c1"># Check if  four octet asn capabilities are found</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">bgp_output</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fourOctetAsnCap&quot;</span><span class="p">:</span> <span class="s2">&quot;not found&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

            <span class="c1"># Check if capabilities are not advertised, received, or enabled</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;advertised&quot;</span><span class="p">,</span> <span class="s2">&quot;received&quot;</span><span class="p">,</span> <span class="s2">&quot;enabled&quot;</span><span class="p">]):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fourOctetAsnCap&quot;</span><span class="p">:</span> <span class="n">bgp_output</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

        <span class="c1"># Check if there are any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peer four octet asn capabilities are not found or not ok:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerCount" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerCount</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerCount" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the count of BGP peers for a given address family.</p>
<p>It supports multiple types of Address Families Identifiers (AFI) and Subsequent Address Family Identifiers (SAFI).</p>
<p>For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6 (AFI) which is handled automatically in this test.</p>
<p>Please refer to the Input class attributes below for details.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: If the count of BGP peers matches the expected count for each address family and VRF.</li>
<li>Failure: If the count of BGP peers does not match the expected count, or if BGP is not configured for an expected VRF or address family.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerCount</span><span class="p">:</span>
<span class="w">        </span><span class="nt">address_families</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;evpn&quot;</span>
<span class="w">            </span><span class="nt">num_peers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipv4&quot;</span>
<span class="w">            </span><span class="nt">safi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unicast&quot;</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PROD&quot;</span>
<span class="w">            </span><span class="nt">num_peers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipv4&quot;</span>
<span class="w">            </span><span class="nt">safi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unicast&quot;</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default&quot;</span>
<span class="w">            </span><span class="nt">num_peers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipv4&quot;</span>
<span class="w">            </span><span class="nt">safi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;multicast&quot;</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DEV&quot;</span>
<span class="w">            </span><span class="nt">num_peers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerCount-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerCount-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>address_families</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerCount.Input.BgpAfi">BgpAfi</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP address families (BgpAfi).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerCount-attributes">BgpAfi<a href="#anta.tests.routing.bgp.VerifyBGPPeerCount-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>afi</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Afi" href="../types/#anta.custom_types.Afi">Afi</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    BGP address family (AFI).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>safi</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Safi" href="../types/#anta.custom_types.Safi">Safi</a> | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional BGP subsequent service family (SAFI).

If the input `afi` is `ipv4` or `ipv6`, a valid `safi` must be provided.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for IPv4 and IPv6. If not provided, it defaults to `default`.

If the input `afi` is not `ipv4` or `ipv6`, e.g. `evpn`, `vrf` must be `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>num_peers</code></td>
                <td>
                      <code><span title="pydantic.PositiveInt">PositiveInt</span></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Number of expected BGP peer(s).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerCount</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the count of BGP peers for a given address family.</span>

<span class="sd">    It supports multiple types of Address Families Identifiers (AFI) and Subsequent Address Family Identifiers (SAFI).</span>

<span class="sd">    For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6 (AFI) which is handled automatically in this test.</span>

<span class="sd">    Please refer to the Input class attributes below for details.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: If the count of BGP peers matches the expected count for each address family and VRF.</span>
<span class="sd">    * Failure: If the count of BGP peers does not match the expected count, or if BGP is not configured for an expected VRF or address family.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerCount:</span>
<span class="sd">            address_families:</span>
<span class="sd">              - afi: &quot;evpn&quot;</span>
<span class="sd">                num_peers: 2</span>
<span class="sd">              - afi: &quot;ipv4&quot;</span>
<span class="sd">                safi: &quot;unicast&quot;</span>
<span class="sd">                vrf: &quot;PROD&quot;</span>
<span class="sd">                num_peers: 2</span>
<span class="sd">              - afi: &quot;ipv4&quot;</span>
<span class="sd">                safi: &quot;unicast&quot;</span>
<span class="sd">                vrf: &quot;default&quot;</span>
<span class="sd">                num_peers: 3</span>
<span class="sd">              - afi: &quot;ipv4&quot;</span>
<span class="sd">                safi: &quot;multicast&quot;</span>
<span class="sd">                vrf: &quot;DEV&quot;</span>
<span class="sd">                num_peers: 3</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerCount&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the count of BGP peers.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp </span><span class="si">{afi}</span><span class="s2"> </span><span class="si">{safi}</span><span class="s2"> summary vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp </span><span class="si">{afi}</span><span class="s2"> summary&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerCount test.&quot;&quot;&quot;</span>

        <span class="n">address_families</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpAfi</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP address families (BgpAfi).&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpAfi</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP address family (AFI) and subsequent address family (SAFI).&quot;&quot;&quot;</span>

            <span class="n">afi</span><span class="p">:</span> <span class="n">Afi</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;BGP address family (AFI).&quot;&quot;&quot;</span>
            <span class="n">safi</span><span class="p">:</span> <span class="n">Safi</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional BGP subsequent service family (SAFI).</span>

<span class="sd">            If the input `afi` is `ipv4` or `ipv6`, a valid `safi` must be provided.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Optional VRF for IPv4 and IPv6. If not provided, it defaults to `default`.</span>

<span class="sd">            If the input `afi` is not `ipv4` or `ipv6`, e.g. `evpn`, `vrf` must be `default`.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">num_peers</span><span class="p">:</span> <span class="n">PositiveInt</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Number of expected BGP peer(s).&quot;&quot;&quot;</span>

            <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">validate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Validate the inputs provided to the BgpAfi class.</span>

<span class="sd">                If afi is either ipv4 or ipv6, safi must be provided.</span>

<span class="sd">                If afi is not ipv4 or ipv6, safi must not be provided and vrf must be default.</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">safi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;safi&#39; must be provided when afi is ipv4 or ipv6&quot;</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">safi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;safi&#39; must not be provided when afi is not ipv4 or ipv6&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">vrf</span> <span class="o">!=</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;vrf&#39; must be default when afi is not ipv4 or ipv6&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP address family in the input list.&quot;&quot;&quot;</span>
        <span class="n">commands</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">afi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">address_families</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPPeerCount</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">safi</span> <span class="o">!=</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">vrf</span><span class="p">))</span>

            <span class="c1"># For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6</span>
            <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPPeerCount</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">safi</span> <span class="o">==</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">safi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">vrf</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPPeerCount</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">commands</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerCount.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>

        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">:</span>
            <span class="n">num_peers</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">peer_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">command_output</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">json_output</span>

            <span class="n">afi</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">afi</span>
            <span class="n">safi</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">safi</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="s2">&quot;safi&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">afi_vrf</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vrf</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="s2">&quot;vrf&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span>

            <span class="c1"># Swapping AFI and SAFI in case of SR-TE</span>
            <span class="k">if</span> <span class="n">afi</span> <span class="o">==</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">afi</span><span class="p">,</span> <span class="n">safi</span> <span class="o">=</span> <span class="n">safi</span><span class="p">,</span> <span class="n">afi</span>

            <span class="k">for</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">address_families</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">afi</span> <span class="o">==</span> <span class="n">afi</span> <span class="ow">and</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">safi</span> <span class="o">==</span> <span class="n">safi</span> <span class="ow">and</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">vrf</span> <span class="o">==</span> <span class="n">afi_vrf</span><span class="p">:</span>
                    <span class="n">num_peers</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">num_peers</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">vrfs</span> <span class="o">:=</span> <span class="n">command_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vrfs&quot;</span><span class="p">)):</span>
                <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi_vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="s2">&quot;Not Configured&quot;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">afi_vrf</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vrf_data</span> <span class="ow">in</span> <span class="n">vrfs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="n">peer_count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vrf_data</span><span class="p">[</span><span class="s2">&quot;peers&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">peer_count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">command_output</span><span class="p">[</span><span class="s2">&quot;vrfs&quot;</span><span class="p">][</span><span class="n">afi_vrf</span><span class="p">][</span><span class="s2">&quot;peers&quot;</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">peer_count</span> <span class="o">!=</span> <span class="n">num_peers</span><span class="p">:</span>
                <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi_vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Expected: </span><span class="si">{</span><span class="n">num_peers</span><span class="si">}</span><span class="s2">, Actual: </span><span class="si">{</span><span class="n">peer_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failures: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">failures</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerDropStats" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerDropStats</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies BGP NLRI drop statistics for the provided BGP IPv4 peer(s).</p>
<p>By default, all drop statistics counters will be checked for any non-zero values.
An optional list of specific drop statistics can be provided for granular testing.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the BGP peer&rsquo;s drop statistic(s) are zero.</li>
<li>Failure: The test will fail if the BGP peer&rsquo;s drop statistic(s) are non-zero/Not Found or peer is not configured.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerDropStats</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">drop_stats</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inDropAsloop</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefixEvpnDroppedUnsupportedRouteType</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerDropStats.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerDropStats-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>drop_stats</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="anta.custom_types.BgpDropStats" href="../types/#anta.custom_types.BgpDropStats">BgpDropStats</a>] | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional list of drop statistics to be verified. If not provided, test will verifies all the drop statistics.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerDropStats</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies BGP NLRI drop statistics for the provided BGP IPv4 peer(s).</span>

<span class="sd">    By default, all drop statistics counters will be checked for any non-zero values.</span>
<span class="sd">    An optional list of specific drop statistics can be provided for granular testing.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the BGP peer&#39;s drop statistic(s) are zero.</span>
<span class="sd">    * Failure: The test will fail if the BGP peer&#39;s drop statistic(s) are non-zero/Not Found or peer is not configured.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerDropStats:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                drop_stats:</span>
<span class="sd">                  - inDropAsloop</span>
<span class="sd">                  - prefixEvpnDroppedUnsupportedRouteType</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerDropStats&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the NLRI drop statistics of a BGP IPv4 peer(s).&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors </span><span class="si">{peer}</span><span class="s2"> vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerDropStats test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">drop_stats</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpDropStats</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional list of drop statistics to be verified. If not provided, test will verifies all the drop statistics.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP peer in the input list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">peer</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">),</span> <span class="n">vrf</span><span class="o">=</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">]</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerDropStats.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">):</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">peer</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">drop_statistics</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">drop_stats</span>

            <span class="c1"># Verify BGP peer</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">peer_list</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">peer_detail</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">peer_list</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="k">continue</span>

            <span class="c1"># Verify BGP peer&#39;s drop stats</span>
            <span class="n">drop_stats_output</span> <span class="o">=</span> <span class="n">peer_detail</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dropStats&quot;</span><span class="p">,</span> <span class="p">{})</span>

            <span class="c1"># In case drop stats not provided, It will check all drop statistics</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">drop_statistics</span><span class="p">:</span>
                <span class="n">drop_statistics</span> <span class="o">=</span> <span class="n">drop_stats_output</span>

            <span class="c1"># Verify BGP peer&#39;s drop stats</span>
            <span class="n">drop_stats_not_ok</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">drop_stat</span><span class="p">:</span> <span class="n">drop_stats_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">drop_stat</span><span class="p">,</span> <span class="s2">&quot;Not Found&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">drop_stat</span> <span class="ow">in</span> <span class="n">drop_statistics</span> <span class="k">if</span> <span class="n">drop_stats_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">drop_stat</span><span class="p">,</span> <span class="s2">&quot;Not Found&quot;</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">drop_stats_not_ok</span><span class="p">):</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="n">drop_stats_not_ok</span><span class="p">}</span>

        <span class="c1"># Check if any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The following BGP peers are not configured or have non-zero NLRI drop statistics counters:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerMD5Auth" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerMD5Auth</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the MD5 authentication and state of IPv4 BGP peers in a specified VRF.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if IPv4 BGP peers are configured with MD5 authentication and state as established in the specified VRF.</li>
<li>Failure: The test will fail if IPv4 BGP peers are not found, state is not as established or MD5 authentication is not enabled in the specified VRF.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerMD5Auth</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.5</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerMD5Auth.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of IPv4 BGP peers.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerMD5Auth-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerMD5Auth</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the MD5 authentication and state of IPv4 BGP peers in a specified VRF.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if IPv4 BGP peers are configured with MD5 authentication and state as established in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if IPv4 BGP peers are not found, state is not as established or MD5 authentication is not enabled in the specified VRF.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerMD5Auth:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">              - peer_address: 172.30.11.5</span>
<span class="sd">                vrf: default</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerMD5Auth&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the MD5 authentication and state of a BGP peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaCommand</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors vrf all&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerMD5Auth test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of IPv4 BGP peers.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerMD5Auth.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Iterate over each command</span>
        <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">peer</span><span class="p">:</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{}}}}</span>

            <span class="c1"># Check if BGP output exists</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># Check if BGP peer state and authentication</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">)</span>
            <span class="n">md5_auth_enabled</span> <span class="o">=</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;md5AuthEnabled&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">state</span> <span class="o">!=</span> <span class="s2">&quot;Established&quot;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">md5_auth_enabled</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span> <span class="s2">&quot;md5_auth_enabled&quot;</span><span class="p">:</span> <span class="n">md5_auth_enabled</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

        <span class="c1"># Check if there are any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peers are not configured, not established or MD5 authentication is not enabled:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerMPCaps" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerMPCaps</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the multiprotocol capabilities of a BGP peer in a specified VRF.</p>
<p>Supports <code>strict: True</code> to verify that only the specified capabilities are configured, requiring an exact match.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the BGP peer&rsquo;s multiprotocol capabilities are advertised, received, and enabled in the specified VRF.</li>
<li>Failure: The test will fail if BGP peers are not found or multiprotocol capabilities are not advertised, received, and enabled in the specified VRF.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerMPCaps</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">strict</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">            </span><span class="nt">capabilities</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ipv4Unicast</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerMPCaps.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerMPCaps-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>strict</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    If True, requires exact matching of provided capabilities. Defaults to False.
                  </div>
                </td>
                <td>
                      <code>False</code>
                </td>
              </tr>
              <tr>
                <td><code>capabilities</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="anta.custom_types.MultiProtocolCaps" href="../types/#anta.custom_types.MultiProtocolCaps">MultiProtocolCaps</a>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of multiprotocol capabilities to be verified.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerMPCaps</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the multiprotocol capabilities of a BGP peer in a specified VRF.</span>

<span class="sd">    Supports `strict: True` to verify that only the specified capabilities are configured, requiring an exact match.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the BGP peer&#39;s multiprotocol capabilities are advertised, received, and enabled in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if BGP peers are not found or multiprotocol capabilities are not advertised, received, and enabled in the specified VRF.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerMPCaps:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                strict: False</span>
<span class="sd">                capabilities:</span>
<span class="sd">                  - ipv4Unicast</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerMPCaps&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the multiprotocol capabilities of a BGP peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaCommand</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors vrf all&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerMPCaps test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;If True, requires exact matching of provided capabilities. Defaults to False.&quot;&quot;&quot;</span>
            <span class="n">capabilities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MultiProtocolCaps</span><span class="p">]</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;List of multiprotocol capabilities to be verified.&quot;&quot;&quot;</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerMPCaps.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Iterate over each bgp peer.</span>
        <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">capabilities</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">capabilities</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">peer</span><span class="p">:</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{}}}}</span>

            <span class="c1"># Check if BGP output exists.</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># Fetching the capabilities output.</span>
            <span class="n">bgp_output</span> <span class="o">=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;neighborCapabilities.multiprotocolCaps&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">strict</span> <span class="ow">and</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">capabilities</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Expected only `</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">capabilities</span><span class="p">)</span><span class="si">}</span><span class="s2">` capabilities should be listed but found `</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">)</span><span class="si">}</span><span class="s2">` instead.&quot;</span>
                <span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># Check each capability</span>
            <span class="k">for</span> <span class="n">capability</span> <span class="ow">in</span> <span class="n">capabilities</span><span class="p">:</span>
                <span class="n">capability_output</span> <span class="o">=</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">capability</span><span class="p">)</span>

                <span class="c1"># Check if capabilities are missing</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">capability_output</span><span class="p">:</span>
                    <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">][</span><span class="n">capability</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;not found&quot;</span>
                    <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

                <span class="c1"># Check if capabilities are not advertised, received, or enabled</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">capability_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;advertised&quot;</span><span class="p">,</span> <span class="s2">&quot;received&quot;</span><span class="p">,</span> <span class="s2">&quot;enabled&quot;</span><span class="p">]):</span>
                    <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">][</span><span class="n">capability</span><span class="p">]</span> <span class="o">=</span> <span class="n">capability_output</span>
                    <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

        <span class="c1"># Check if there are any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peer multiprotocol capabilities are not found or not ok:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerRouteLimit" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerRouteLimit</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the maximum routes and optionally verifies the maximum routes warning limit for the provided BGP IPv4 peer(s).</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the BGP peer&rsquo;s maximum routes and, if provided, the maximum routes warning limit are equal to the given limits.</li>
<li>Failure: The test will fail if the BGP peer&rsquo;s maximum routes do not match the given limit, or if the maximum routes warning limit is provided
and does not match the given limit, or if the peer is not configured.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerRouteLimit</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">maximum_routes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12000</span>
<span class="w">            </span><span class="nt">warning_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10000</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerRouteLimit.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteLimit-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>maximum_routes</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    The maximum allowable number of BGP routes, `0` means unlimited.
                  </div>
                </td>
                <td>
                      <code><span title="pydantic.Field">Field</span>(ge=0, le=4294967294)</code>
                </td>
              </tr>
              <tr>
                <td><code>warning_limit</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional maximum routes warning limit. If not provided, it defaults to `0` meaning no warning limit.
                  </div>
                </td>
                <td>
                      <code><span title="pydantic.Field">Field</span>(default=0, ge=0, le=4294967294)</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerRouteLimit</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the maximum routes and optionally verifies the maximum routes warning limit for the provided BGP IPv4 peer(s).</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the BGP peer&#39;s maximum routes and, if provided, the maximum routes warning limit are equal to the given limits.</span>
<span class="sd">    * Failure: The test will fail if the BGP peer&#39;s maximum routes do not match the given limit, or if the maximum routes warning limit is provided</span>
<span class="sd">    and does not match the given limit, or if the peer is not configured.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerRouteLimit:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                maximum_routes: 12000</span>
<span class="sd">                warning_limit: 10000</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerRouteLimit&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies maximum routes and maximum routes warning limit for the provided BGP IPv4 peer(s).&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors </span><span class="si">{peer}</span><span class="s2"> vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerRouteLimit test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">maximum_routes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">4294967294</span><span class="p">)</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;The maximum allowable number of BGP routes, `0` means unlimited.&quot;&quot;&quot;</span>
            <span class="n">warning_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">4294967294</span><span class="p">)</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional maximum routes warning limit. If not provided, it defaults to `0` meaning no warning limit.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP peer in the input list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">peer</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">),</span> <span class="n">vrf</span><span class="o">=</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">]</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerRouteLimit.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">):</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">input_entry</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">maximum_routes</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">maximum_routes</span>
            <span class="n">warning_limit</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">warning_limit</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="c1"># Verify BGP peer.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">peer_list</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">peer_detail</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">peer_list</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="k">continue</span>

            <span class="c1"># Verify maximum routes configured.</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">actual_routes</span> <span class="o">:=</span> <span class="n">peer_detail</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxTotalRoutes&quot;</span><span class="p">,</span> <span class="s2">&quot;Not Found&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="n">maximum_routes</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;Maximum total routes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">actual_routes</span>

            <span class="c1"># Verify warning limit if given.</span>
            <span class="k">if</span> <span class="n">warning_limit</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actual_warning_limit</span> <span class="o">:=</span> <span class="n">peer_detail</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalRoutesWarnLimit&quot;</span><span class="p">,</span> <span class="s2">&quot;Not Found&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="n">warning_limit</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;Warning limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">actual_warning_limit</span>

            <span class="c1"># Updated failures if any.</span>
            <span class="k">if</span> <span class="n">failure</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="n">failure</span><span class="p">}</span>

        <span class="c1"># Check if any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The following BGP peer(s) are not configured or maximum routes and maximum routes warning limit is not correct:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerRouteRefreshCap</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the route refresh capabilities of a BGP peer in a specified VRF.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the BGP peer&rsquo;s route refresh capabilities are advertised, received, and enabled in the specified VRF.</li>
<li>Failure: The test will fail if BGP peers are not found or route refresh capabilities are not advertised, received, and enabled in the specified VRF.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerRouteRefreshCap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerRouteRefreshCap-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerRouteRefreshCap</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the route refresh capabilities of a BGP peer in a specified VRF.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the BGP peer&#39;s route refresh capabilities are advertised, received, and enabled in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if BGP peers are not found or route refresh capabilities are not advertised, received, and enabled in the specified VRF.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerRouteRefreshCap:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerRouteRefreshCap&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the route refresh capabilities of a BGP peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaCommand</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors vrf all&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerRouteRefreshCap test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerRouteRefreshCap.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Iterate over each bgp peer</span>
        <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">peer</span><span class="p">:</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{}}}}</span>

            <span class="c1"># Check if BGP output exists</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">bgp_output</span> <span class="o">=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;neighborCapabilities.routeRefreshCap&quot;</span><span class="p">)</span>

            <span class="c1"># Check if route refresh capabilities are found</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">bgp_output</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;routeRefreshCap&quot;</span><span class="p">:</span> <span class="s2">&quot;not found&quot;</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

            <span class="c1"># Check if capabilities are not advertised, received, or enabled</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;advertised&quot;</span><span class="p">,</span> <span class="s2">&quot;received&quot;</span><span class="p">,</span> <span class="s2">&quot;enabled&quot;</span><span class="p">]):</span>
                <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;routeRefreshCap&quot;</span><span class="p">:</span> <span class="n">bgp_output</span><span class="p">}</span>
                <span class="n">failures</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

        <span class="c1"># Check if there are any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peer route refresh capabilities are not found or not ok:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeerUpdateErrors</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies BGP update error counters for the provided BGP IPv4 peer(s).</p>
<p>By default, all update error counters will be checked for any non-zero values.
An optional list of specific update error counters can be provided for granular testing.</p>
<p>Note: For &ldquo;disabledAfiSafi&rdquo; error counter field, checking that it&rsquo;s not &ldquo;None&rdquo; versus 0.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the BGP peer&rsquo;s update error counter(s) are zero/None.</li>
<li>Failure: The test will fail if the BGP peer&rsquo;s update error counter(s) are non-zero/not None/Not Found or
peer is not configured.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeerUpdateErrors</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">update_error_filter</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inUpdErrWithdraw</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPPeerUpdateErrors-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>update_errors</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="anta.custom_types.BgpUpdateError" href="../types/#anta.custom_types.BgpUpdateError">BgpUpdateError</a>] | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional list of update error counters to be verified. If not provided, test will verifies all the update error counters.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeerUpdateErrors</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies BGP update error counters for the provided BGP IPv4 peer(s).</span>

<span class="sd">    By default, all update error counters will be checked for any non-zero values.</span>
<span class="sd">    An optional list of specific update error counters can be provided for granular testing.</span>

<span class="sd">    Note: For &quot;disabledAfiSafi&quot; error counter field, checking that it&#39;s not &quot;None&quot; versus 0.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the BGP peer&#39;s update error counter(s) are zero/None.</span>
<span class="sd">    * Failure: The test will fail if the BGP peer&#39;s update error counter(s) are non-zero/not None/Not Found or</span>
<span class="sd">    peer is not configured.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeerUpdateErrors:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                update_error_filter:</span>
<span class="sd">                  - inUpdErrWithdraw</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeerUpdateErrors&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the update error counters of a BGP IPv4 peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors </span><span class="si">{peer}</span><span class="s2"> vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeerUpdateErrors test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">update_errors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpUpdateError</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional list of update error counters to be verified. If not provided, test will verifies all the update error counters.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP peer in the input list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">peer</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">),</span> <span class="n">vrf</span><span class="o">=</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">]</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeerUpdateErrors.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">):</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">peer</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">update_error_counters</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">update_errors</span>

            <span class="c1"># Verify BGP peer.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">peer_list</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">peer_detail</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">peer_list</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="k">continue</span>

            <span class="c1"># Getting the BGP peer&#39;s error counters output.</span>
            <span class="n">error_counters_output</span> <span class="o">=</span> <span class="n">peer_detail</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peerInUpdateErrors&quot;</span><span class="p">,</span> <span class="p">{})</span>

            <span class="c1"># In case update error counters not provided, It will check all the update error counters.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">update_error_counters</span><span class="p">:</span>
                <span class="n">update_error_counters</span> <span class="o">=</span> <span class="n">error_counters_output</span>

            <span class="c1"># verifying the error counters.</span>
            <span class="n">error_counters_not_ok</span> <span class="o">=</span> <span class="p">{</span>
                <span class="p">(</span><span class="s2">&quot;disabledAfiSafi&quot;</span> <span class="k">if</span> <span class="n">error_counter</span> <span class="o">==</span> <span class="s2">&quot;disabledAfiSafi&quot;</span> <span class="k">else</span> <span class="n">error_counter</span><span class="p">):</span> <span class="n">value</span>
                <span class="k">for</span> <span class="n">error_counter</span> <span class="ow">in</span> <span class="n">update_error_counters</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="n">error_counters_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">error_counter</span><span class="p">,</span> <span class="s2">&quot;Not Found&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="s2">&quot;None&quot;</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="n">error_counters_not_ok</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="n">error_counters_not_ok</span><span class="p">}</span>

        <span class="c1"># Check if any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The following BGP peers are not configured or have non-zero update error counters:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPPeersHealth" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPPeersHealth</span>


<a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the health of BGP peers.</p>
<p>It will validate that all BGP sessions are established and all message queues for these BGP sessions are empty for a given address family.</p>
<p>It supports multiple types of Address Families Identifiers (AFI) and Subsequent Address Family Identifiers (SAFI).</p>
<p>For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6 (AFI) which is handled automatically in this test.</p>
<p>Please refer to the Input class attributes below for details.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: If all BGP sessions are established and all messages queues are empty for each address family and VRF.</li>
<li>Failure: If there are issues with any of the BGP sessions, or if BGP is not configured for an expected VRF or address family.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPPeersHealth</span><span class="p">:</span>
<span class="w">        </span><span class="nt">address_families</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;evpn&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipv4&quot;</span>
<span class="w">            </span><span class="nt">safi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unicast&quot;</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipv6&quot;</span>
<span class="w">            </span><span class="nt">safi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unicast&quot;</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DEV&quot;</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>address_families</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPPeersHealth.Input.BgpAfi">BgpAfi</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP address families (BgpAfi).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes">BgpAfi<a href="#anta.tests.routing.bgp.VerifyBGPPeersHealth-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>afi</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Afi" href="../types/#anta.custom_types.Afi">Afi</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    BGP address family (AFI).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>safi</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Safi" href="../types/#anta.custom_types.Safi">Safi</a> | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional BGP subsequent service family (SAFI).

If the input `afi` is `ipv4` or `ipv6`, a valid `safi` must be provided.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for IPv4 and IPv6. If not provided, it defaults to `default`.

If the input `afi` is not `ipv4` or `ipv6`, e.g. `evpn`, `vrf` must be `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPPeersHealth</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the health of BGP peers.</span>

<span class="sd">    It will validate that all BGP sessions are established and all message queues for these BGP sessions are empty for a given address family.</span>

<span class="sd">    It supports multiple types of Address Families Identifiers (AFI) and Subsequent Address Family Identifiers (SAFI).</span>

<span class="sd">    For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6 (AFI) which is handled automatically in this test.</span>

<span class="sd">    Please refer to the Input class attributes below for details.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: If all BGP sessions are established and all messages queues are empty for each address family and VRF.</span>
<span class="sd">    * Failure: If there are issues with any of the BGP sessions, or if BGP is not configured for an expected VRF or address family.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPPeersHealth:</span>
<span class="sd">            address_families:</span>
<span class="sd">              - afi: &quot;evpn&quot;</span>
<span class="sd">              - afi: &quot;ipv4&quot;</span>
<span class="sd">                safi: &quot;unicast&quot;</span>
<span class="sd">                vrf: &quot;default&quot;</span>
<span class="sd">              - afi: &quot;ipv6&quot;</span>
<span class="sd">                safi: &quot;unicast&quot;</span>
<span class="sd">                vrf: &quot;DEV&quot;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPPeersHealth&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the health of BGP peers&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp </span><span class="si">{afi}</span><span class="s2"> </span><span class="si">{safi}</span><span class="s2"> summary vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp </span><span class="si">{afi}</span><span class="s2"> summary&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPPeersHealth test.&quot;&quot;&quot;</span>

        <span class="n">address_families</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpAfi</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP address families (BgpAfi).&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpAfi</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP address family (AFI) and subsequent address family (SAFI).&quot;&quot;&quot;</span>

            <span class="n">afi</span><span class="p">:</span> <span class="n">Afi</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;BGP address family (AFI).&quot;&quot;&quot;</span>
            <span class="n">safi</span><span class="p">:</span> <span class="n">Safi</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional BGP subsequent service family (SAFI).</span>

<span class="sd">            If the input `afi` is `ipv4` or `ipv6`, a valid `safi` must be provided.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Optional VRF for IPv4 and IPv6. If not provided, it defaults to `default`.</span>

<span class="sd">            If the input `afi` is not `ipv4` or `ipv6`, e.g. `evpn`, `vrf` must be `default`.</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">validate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Validate the inputs provided to the BgpAfi class.</span>

<span class="sd">                If afi is either ipv4 or ipv6, safi must be provided.</span>

<span class="sd">                If afi is not ipv4 or ipv6, safi must not be provided and vrf must be default.</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">safi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;safi&#39; must be provided when afi is ipv4 or ipv6&quot;</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">safi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;safi&#39; must not be provided when afi is not ipv4 or ipv6&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">vrf</span> <span class="o">!=</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;vrf&#39; must be default when afi is not ipv4 or ipv6&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP address family in the input list.&quot;&quot;&quot;</span>
        <span class="n">commands</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">afi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">address_families</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPPeersHealth</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">safi</span> <span class="o">!=</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">vrf</span><span class="p">))</span>

            <span class="c1"># For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6</span>
            <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPPeersHealth</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">safi</span> <span class="o">==</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">safi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">vrf</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPPeersHealth</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">commands</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPPeersHealth.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>

        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">:</span>
            <span class="n">command_output</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">json_output</span>

            <span class="n">afi</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">afi</span>
            <span class="n">safi</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">safi</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="s2">&quot;safi&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">afi_vrf</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vrf</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="s2">&quot;vrf&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span>

            <span class="c1"># Swapping AFI and SAFI in case of SR-TE</span>
            <span class="k">if</span> <span class="n">afi</span> <span class="o">==</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">afi</span><span class="p">,</span> <span class="n">safi</span> <span class="o">=</span> <span class="n">safi</span><span class="p">,</span> <span class="n">afi</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">vrfs</span> <span class="o">:=</span> <span class="n">command_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vrfs&quot;</span><span class="p">)):</span>
                <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi_vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="s2">&quot;Not Configured&quot;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">for</span> <span class="n">vrf</span><span class="p">,</span> <span class="n">vrf_data</span> <span class="ow">in</span> <span class="n">vrfs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">peers</span> <span class="o">:=</span> <span class="n">vrf_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peers&quot;</span><span class="p">)):</span>
                    <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi_vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="s2">&quot;No Peers&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="n">peer_issues</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">peer</span><span class="p">,</span> <span class="n">peer_data</span> <span class="ow">in</span> <span class="n">peers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">issues</span> <span class="o">=</span> <span class="n">_check_peer_issues</span><span class="p">(</span><span class="n">peer_data</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">issues</span><span class="p">:</span>
                        <span class="n">peer_issues</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="n">issues</span>

                <span class="k">if</span> <span class="n">peer_issues</span><span class="p">:</span>
                    <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="n">peer_issues</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failures: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">failures</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPSpecificPeers" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPSpecificPeers</span>


<a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the health of specific BGP peer(s).</p>
<p>It will validate that the BGP session is established and all message queues for this BGP session are empty for the given peer(s).</p>
<p>It supports multiple types of Address Families Identifiers (AFI) and Subsequent Address Family Identifiers (SAFI).</p>
<p>For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6 (AFI) which is handled automatically in this test.</p>
<p>Please refer to the Input class attributes below for details.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: If the BGP session is established and all messages queues are empty for each given peer.</li>
<li>Failure: If the BGP session has issues or is not configured, or if BGP is not configured for an expected VRF or address family.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPSpecificPeers</span><span class="p">:</span>
<span class="w">        </span><span class="nt">address_families</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;evpn&quot;</span>
<span class="w">            </span><span class="nt">peers</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.0.1</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.0.2</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">afi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ipv4&quot;</span>
<span class="w">            </span><span class="nt">safi</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;unicast&quot;</span>
<span class="w">            </span><span class="nt">peers</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.254.1</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.255.0</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.255.2</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.255.4</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>address_families</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPSpecificPeers.Input.BgpAfi">BgpAfi</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP address families (BgpAfi).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes">BgpAfi<a href="#anta.tests.routing.bgp.VerifyBGPSpecificPeers-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>afi</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Afi" href="../types/#anta.custom_types.Afi">Afi</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    BGP address family (AFI).
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>safi</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Safi" href="../types/#anta.custom_types.Safi">Safi</a> | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional BGP subsequent service family (SAFI).

If the input `afi` is `ipv4` or `ipv6`, a valid `safi` must be provided.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for IPv4 and IPv6. If not provided, it defaults to `default`.

`all` is NOT supported.

If the input `afi` is not `ipv4` or `ipv6`, e.g. `evpn`, `vrf` must be `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a> | <a class="autorefs autorefs-external" title="ipaddress.IPv6Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv6Address">IPv6Address</a>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP IPv4 or IPv6 peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPSpecificPeers</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the health of specific BGP peer(s).</span>

<span class="sd">    It will validate that the BGP session is established and all message queues for this BGP session are empty for the given peer(s).</span>

<span class="sd">    It supports multiple types of Address Families Identifiers (AFI) and Subsequent Address Family Identifiers (SAFI).</span>

<span class="sd">    For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6 (AFI) which is handled automatically in this test.</span>

<span class="sd">    Please refer to the Input class attributes below for details.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: If the BGP session is established and all messages queues are empty for each given peer.</span>
<span class="sd">    * Failure: If the BGP session has issues or is not configured, or if BGP is not configured for an expected VRF or address family.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPSpecificPeers:</span>
<span class="sd">            address_families:</span>
<span class="sd">              - afi: &quot;evpn&quot;</span>
<span class="sd">                peers:</span>
<span class="sd">                  - 10.1.0.1</span>
<span class="sd">                  - 10.1.0.2</span>
<span class="sd">              - afi: &quot;ipv4&quot;</span>
<span class="sd">                safi: &quot;unicast&quot;</span>
<span class="sd">                peers:</span>
<span class="sd">                  - 10.1.254.1</span>
<span class="sd">                  - 10.1.255.0</span>
<span class="sd">                  - 10.1.255.2</span>
<span class="sd">                  - 10.1.255.4</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPSpecificPeers&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the health of specific BGP peer(s).&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp </span><span class="si">{afi}</span><span class="s2"> </span><span class="si">{safi}</span><span class="s2"> summary vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
        <span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp </span><span class="si">{afi}</span><span class="s2"> summary&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPSpecificPeers test.&quot;&quot;&quot;</span>

        <span class="n">address_families</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpAfi</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP address families (BgpAfi).&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpAfi</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP address family (AFI) and subsequent address family (SAFI).&quot;&quot;&quot;</span>

            <span class="n">afi</span><span class="p">:</span> <span class="n">Afi</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;BGP address family (AFI).&quot;&quot;&quot;</span>
            <span class="n">safi</span><span class="p">:</span> <span class="n">Safi</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional BGP subsequent service family (SAFI).</span>

<span class="sd">            If the input `afi` is `ipv4` or `ipv6`, a valid `safi` must be provided.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Optional VRF for IPv4 and IPv6. If not provided, it defaults to `default`.</span>

<span class="sd">            `all` is NOT supported.</span>

<span class="sd">            If the input `afi` is not `ipv4` or `ipv6`, e.g. `evpn`, `vrf` must be `default`.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">IPv4Address</span> <span class="o">|</span> <span class="n">IPv6Address</span><span class="p">]</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;List of BGP IPv4 or IPv6 peer.&quot;&quot;&quot;</span>

            <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">validate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Validate the inputs provided to the BgpAfi class.</span>

<span class="sd">                If afi is either ipv4 or ipv6, safi must be provided and vrf must NOT be all.</span>

<span class="sd">                If afi is not ipv4 or ipv6, safi must not be provided and vrf must be default.</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">safi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;safi&#39; must be provided when afi is ipv4 or ipv6&quot;</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vrf</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;all&#39; is not supported in this test. Use VerifyBGPPeersHealth test instead.&quot;</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">safi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;safi&#39; must not be provided when afi is not ipv4 or ipv6&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">vrf</span> <span class="o">!=</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&#39;vrf&#39; must be default when afi is not ipv4 or ipv6&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP address family in the input list.&quot;&quot;&quot;</span>
        <span class="n">commands</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">afi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">address_families</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPSpecificPeers</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">safi</span> <span class="o">!=</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">vrf</span><span class="p">))</span>

            <span class="c1"># For SR-TE SAFI, the EOS command supports sr-te first then ipv4/ipv6</span>
            <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPSpecificPeers</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">safi</span> <span class="o">==</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">safi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">vrf</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="n">VerifyBGPSpecificPeers</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">afi</span><span class="o">.</span><span class="n">afi</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ipv4&quot;</span><span class="p">,</span> <span class="s2">&quot;ipv6&quot;</span><span class="p">]:</span>
                <span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="o">.</span><span class="n">afi</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">commands</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPSpecificPeers.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>

        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">:</span>
            <span class="n">command_output</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">json_output</span>

            <span class="n">afi</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">afi</span>
            <span class="n">safi</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">safi</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="s2">&quot;safi&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">afi_vrf</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vrf</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="s2">&quot;vrf&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span>

            <span class="c1"># Swapping AFI and SAFI in case of SR-TE</span>
            <span class="k">if</span> <span class="n">afi</span> <span class="o">==</span> <span class="s2">&quot;sr-te&quot;</span><span class="p">:</span>
                <span class="n">afi</span><span class="p">,</span> <span class="n">safi</span> <span class="o">=</span> <span class="n">safi</span><span class="p">,</span> <span class="n">afi</span>

            <span class="k">for</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">address_families</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">afi</span> <span class="o">==</span> <span class="n">afi</span> <span class="ow">and</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">safi</span> <span class="o">==</span> <span class="n">safi</span> <span class="ow">and</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">vrf</span> <span class="o">==</span> <span class="n">afi_vrf</span><span class="p">:</span>
                    <span class="n">afi_peers</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">peers</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">vrfs</span> <span class="o">:=</span> <span class="n">command_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vrfs&quot;</span><span class="p">)):</span>
                <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi_vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="s2">&quot;Not Configured&quot;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">peer_issues</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">peer</span> <span class="ow">in</span> <span class="n">afi_peers</span><span class="p">:</span>
                <span class="n">peer_ip</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
                <span class="n">peer_data</span> <span class="o">=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">vrfs</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">afi_vrf</span><span class="si">}</span><span class="s2">_peers_</span><span class="si">{</span><span class="n">peer_ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                <span class="n">issues</span> <span class="o">=</span> <span class="n">_check_peer_issues</span><span class="p">(</span><span class="n">peer_data</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">issues</span><span class="p">:</span>
                    <span class="n">peer_issues</span><span class="p">[</span><span class="n">peer_ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">issues</span>

            <span class="k">if</span> <span class="n">peer_issues</span><span class="p">:</span>
                <span class="n">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="o">=</span><span class="n">failures</span><span class="p">,</span> <span class="n">afi</span><span class="o">=</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="o">=</span><span class="n">safi</span><span class="p">,</span> <span class="n">vrf</span><span class="o">=</span><span class="n">afi_vrf</span><span class="p">,</span> <span class="n">issue</span><span class="o">=</span><span class="n">peer_issues</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failures: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">failures</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBGPTimers" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBGPTimers</span>


<a href="#anta.tests.routing.bgp.VerifyBGPTimers" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies if the BGP peers are configured with the correct hold and keep-alive timers in the specified VRF.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the hold and keep-alive timers are correct for BGP peers in the specified VRF.</li>
<li>Failure: The test will fail if BGP peers are not found or hold and keep-alive timers are not correct in the specified VRF.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBGPTimers</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">hold_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">180</span>
<span class="w">            </span><span class="nt">keep_alive_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.5</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">hold_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">180</span>
<span class="w">            </span><span class="nt">keep_alive_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBGPTimers-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBGPTimers-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBGPTimers.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBGPTimers-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBGPTimers-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>hold_time</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    BGP hold time in seconds.
                  </div>
                </td>
                <td>
                      <code><span title="pydantic.Field">Field</span>(ge=3, le=7200)</code>
                </td>
              </tr>
              <tr>
                <td><code>keep_alive_time</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    BGP keep-alive time in seconds.
                  </div>
                </td>
                <td>
                      <code><span title="pydantic.Field">Field</span>(ge=0, le=3600)</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBGPTimers</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies if the BGP peers are configured with the correct hold and keep-alive timers in the specified VRF.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the hold and keep-alive timers are correct for BGP peers in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if BGP peers are not found or hold and keep-alive timers are not correct in the specified VRF.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBGPTimers:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                hold_time: 180</span>
<span class="sd">                keep_alive_time: 60</span>
<span class="sd">              - peer_address: 172.30.11.5</span>
<span class="sd">                vrf: default</span>
<span class="sd">                hold_time: 180</span>
<span class="sd">                keep_alive_time: 60</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBGPTimers&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the timers of a BGP peer.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaCommand</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors vrf all&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBGPTimers test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">hold_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">7200</span><span class="p">)</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;BGP hold time in seconds.&quot;&quot;&quot;</span>
            <span class="n">keep_alive_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;BGP keep-alive time in seconds.&quot;&quot;&quot;</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBGPTimers.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Iterate over each bgp peer</span>
        <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">:</span>
            <span class="n">peer_address</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">hold_time</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">hold_time</span>
            <span class="n">keep_alive_time</span> <span class="o">=</span> <span class="n">bgp_peer</span><span class="o">.</span><span class="n">keep_alive_time</span>

            <span class="c1"># Verify BGP peer</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">bgp_output</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">bgp_output</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer_address</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer_address</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="k">continue</span>

            <span class="c1"># Verify BGP peer&#39;s hold and keep alive timers</span>
            <span class="k">if</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;holdTime&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">hold_time</span> <span class="ow">or</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;keepaliveTime&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">keep_alive_time</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer_address</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hold_time&quot;</span><span class="p">:</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;holdTime&quot;</span><span class="p">),</span> <span class="s2">&quot;keep_alive_time&quot;</span><span class="p">:</span> <span class="n">bgp_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;keepaliveTime&quot;</span><span class="p">)}}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Following BGP peers are not configured or hold and keep-alive timers are not correct:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyBgpRouteMaps" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyBgpRouteMaps</span>


<a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies BGP inbound and outbound route-maps of BGP IPv4 peer(s).</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: The test will pass if the correct route maps are applied in the correct direction (inbound or outbound) for IPv4 BGP peers in the specified VRF.</li>
<li>Failure: The test will fail if BGP peers are not configured or any neighbor has an incorrect or missing route map in either the inbound or outbound direction.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyBgpRouteMaps</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bgp_peers</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">peer_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.30.11.1</span>
<span class="w">            </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">inbound_route_map</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RM-MLAG-PEER-IN</span>
<span class="w">            </span><span class="nt">outbound_route_map</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RM-MLAG-PEER-OUT</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>bgp_peers</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyBgpRouteMaps.Input.BgpPeer">BgpPeer</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of BGP peers
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes">BgpPeer<a href="#anta.tests.routing.bgp.VerifyBgpRouteMaps-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>peer_address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 address of a BGP peer.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vrf</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Optional VRF for BGP peer. If not provided, it defaults to `default`.
                  </div>
                </td>
                <td>
                      <code>&#39;default&#39;</code>
                </td>
              </tr>
              <tr>
                <td><code>inbound_route_map</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Inbound route map applied, defaults to None.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
              <tr>
                <td><code>outbound_route_map</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    Outbound route map applied, defaults to None.
                  </div>
                </td>
                <td>
                      <code>None</code>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyBgpRouteMaps</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies BGP inbound and outbound route-maps of BGP IPv4 peer(s).</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: The test will pass if the correct route maps are applied in the correct direction (inbound or outbound) for IPv4 BGP peers in the specified VRF.</span>
<span class="sd">    * Failure: The test will fail if BGP peers are not configured or any neighbor has an incorrect or missing route map in either the inbound or outbound direction.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyBgpRouteMaps:</span>
<span class="sd">            bgp_peers:</span>
<span class="sd">              - peer_address: 172.30.11.1</span>
<span class="sd">                vrf: default</span>
<span class="sd">                inbound_route_map: RM-MLAG-PEER-IN</span>
<span class="sd">                outbound_route_map: RM-MLAG-PEER-OUT</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyBgpRouteMaps&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies BGP inbound and outbound route-maps of BGP IPv4 peer(s).&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp neighbors </span><span class="si">{peer}</span><span class="s2"> vrf </span><span class="si">{vrf}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyBgpRouteMaps test.&quot;&quot;&quot;</span>

        <span class="n">bgp_peers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BgpPeer</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of BGP peers&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">BgpPeer</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a BGP peer.&quot;&quot;&quot;</span>

            <span class="n">peer_address</span><span class="p">:</span> <span class="n">IPv4Address</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 address of a BGP peer.&quot;&quot;&quot;</span>
            <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Optional VRF for BGP peer. If not provided, it defaults to `default`.&quot;&quot;&quot;</span>
            <span class="n">inbound_route_map</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Inbound route map applied, defaults to None.&quot;&quot;&quot;</span>
            <span class="n">outbound_route_map</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Outbound route map applied, defaults to None.&quot;&quot;&quot;</span>

            <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">validate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Validate the inputs provided to the BgpPeer class.</span>

<span class="sd">                At least one of &#39;inbound&#39; or &#39;outbound&#39; route-map must be provided.</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inbound_route_map</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">outbound_route_map</span><span class="p">):</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one of &#39;inbound_route_map&#39; or &#39;outbound_route_map&#39; must be provided.&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each BGP peer in the input list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">peer</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">peer_address</span><span class="p">),</span> <span class="n">vrf</span><span class="o">=</span><span class="n">bgp_peer</span><span class="o">.</span><span class="n">vrf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bgp_peer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">]</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyBgpRouteMaps.&quot;&quot;&quot;</span>
        <span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">command</span><span class="p">,</span> <span class="n">input_entry</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bgp_peers</span><span class="p">):</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">input_entry</span><span class="o">.</span><span class="n">peer_address</span><span class="p">)</span>
            <span class="n">vrf</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">vrf</span>
            <span class="n">inbound_route_map</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">inbound_route_map</span>
            <span class="n">outbound_route_map</span> <span class="o">=</span> <span class="n">input_entry</span><span class="o">.</span><span class="n">outbound_route_map</span>
            <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{}}</span>

            <span class="c1"># Verify BGP peer.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">peer_list</span> <span class="o">:=</span> <span class="n">get_value</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">json_output</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrfs.</span><span class="si">{</span><span class="n">vrf</span><span class="si">}</span><span class="s2">.peerList&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">peer_detail</span> <span class="o">:=</span> <span class="n">get_item</span><span class="p">(</span><span class="n">peer_list</span><span class="p">,</span> <span class="s2">&quot;peerAddress&quot;</span><span class="p">,</span> <span class="n">peer</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="s2">&quot;Not configured&quot;</span><span class="p">}</span>
                <span class="k">continue</span>

            <span class="c1"># Verify Inbound route-map</span>
            <span class="k">if</span> <span class="n">inbound_route_map</span> <span class="ow">and</span> <span class="p">(</span><span class="n">inbound_map</span> <span class="o">:=</span> <span class="n">peer_detail</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;routeMapInbound&quot;</span><span class="p">,</span> <span class="s2">&quot;Not Configured&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="n">inbound_route_map</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="n">vrf</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;Inbound route-map&quot;</span><span class="p">:</span> <span class="n">inbound_map</span><span class="p">})</span>

            <span class="c1"># Verify Outbound route-map</span>
            <span class="k">if</span> <span class="n">outbound_route_map</span> <span class="ow">and</span> <span class="p">(</span><span class="n">outbound_map</span> <span class="o">:=</span> <span class="n">peer_detail</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;routeMapOutbound&quot;</span><span class="p">,</span> <span class="s2">&quot;Not Configured&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="n">outbound_route_map</span><span class="p">:</span>
                <span class="n">failure</span><span class="p">[</span><span class="n">vrf</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;Outbound route-map&quot;</span><span class="p">:</span> <span class="n">outbound_map</span><span class="p">})</span>

            <span class="k">if</span> <span class="n">failure</span><span class="p">[</span><span class="n">vrf</span><span class="p">]:</span>
                <span class="n">failures</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="o">=</span> <span class="n">failure</span>

        <span class="c1"># Check if any failures</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">failures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The following BGP peers are not configured or has an incorrect or missing route map in either the inbound or outbound direction:</span><span class="se">\n</span><span class="si">{</span><span class="n">failures</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="anta.tests.routing.bgp.VerifyEVPNType2Route" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VerifyEVPNType2Route</span>


<a href="#anta.tests.routing.bgp.VerifyEVPNType2Route" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

  
        <p>Verifies the EVPN Type-2 routes for a given IPv4 or MAC address and VNI.</p>


<details class="expected-results" open>
  <summary>Expected Results</summary>
  <ul>
<li>Success: If all provided VXLAN endpoints have at least one valid and active path to their EVPN Type-2 routes.</li>
<li>Failure: If any of the provided VXLAN endpoints do not have at least one valid and active path to their EVPN Type-2 routes.</li>
</ul>
</details>


<details class="example" open>
  <summary>Examples</summary>
        <div class="highlight"><pre><span></span><code><span class="nt">anta.tests.routing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bgp</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">VerifyEVPNType2Route</span><span class="p">:</span>
<span class="w">        </span><span class="nt">vxlan_endpoints</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.20.102</span>
<span class="w">            </span><span class="nt">vni</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10020</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aac1.ab5d.b41e</span>
<span class="w">            </span><span class="nt">vni</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10010</span>
</code></pre></div>
</details>

  

  <div class="doc doc-children">






<h3 id="anta.tests.routing.bgp.VerifyEVPNType2Route-attributes">Inputs<a href="#anta.tests.routing.bgp.VerifyEVPNType2Route-attributes" class="headerlink" title="Permanent link">&para;</a></h3>  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>vxlan_endpoints</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="anta.tests.routing.bgp.VerifyEVPNType2Route.Input.VxlanEndpoint">VxlanEndpoint</span>]</code>
                </td>
                <td>
                  <div class="doc-md-description">
                    List of VXLAN endpoints to verify.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
<h4 id="anta.tests.routing.bgp.VerifyEVPNType2Route-attributes">VxlanEndpoint<a href="#anta.tests.routing.bgp.VerifyEVPNType2Route-attributes" class="headerlink" title="Permanent link">&para;</a></h4>          <div class="doc doc-children doc-contents">
  

  <div class="doc doc-children">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <td><code>address</code></td>
                <td>
                      <code><a class="autorefs autorefs-external" title="ipaddress.IPv4Address" href="https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address">IPv4Address</a> | <span title="pydantic_extra_types.mac_address.MacAddress">MacAddress</span></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    IPv4 or MAC address of the VXLAN endpoint.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
              <tr>
                <td><code>vni</code></td>
                <td>
                      <code><a class="autorefs autorefs-internal" title="anta.custom_types.Vni" href="../types/#anta.custom_types.Vni">Vni</a></code>
                </td>
                <td>
                  <div class="doc-md-description">
                    VNI of the VXLAN endpoint.
                  </div>
                </td>
                <td>
                    <em>-</em>
                </td>
              </tr>
          </tbody>
        </table>
  </div>
          </div>
  </div>





  </div>
	<details class="quote">
	<summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
	<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyEVPNType2Route</span><span class="p">(</span><span class="n">AntaTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verifies the EVPN Type-2 routes for a given IPv4 or MAC address and VNI.</span>

<span class="sd">    Expected Results</span>
<span class="sd">    ----------------</span>
<span class="sd">    * Success: If all provided VXLAN endpoints have at least one valid and active path to their EVPN Type-2 routes.</span>
<span class="sd">    * Failure: If any of the provided VXLAN endpoints do not have at least one valid and active path to their EVPN Type-2 routes.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```yaml</span>
<span class="sd">    anta.tests.routing:</span>
<span class="sd">      bgp:</span>
<span class="sd">        - VerifyEVPNType2Route:</span>
<span class="sd">            vxlan_endpoints:</span>
<span class="sd">              - address: 192.168.20.102</span>
<span class="sd">                vni: 10020</span>
<span class="sd">              - address: aac1.ab5d.b41e</span>
<span class="sd">                vni: 10010</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;VerifyEVPNType2Route&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Verifies the EVPN Type-2 routes for a given IPv4 or MAC address and VNI.&quot;</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bgp&quot;</span><span class="p">]</span>
    <span class="n">commands</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span> <span class="o">|</span> <span class="n">AntaTemplate</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">AntaTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;show bgp evpn route-type mac-ip </span><span class="si">{address}</span><span class="s2"> vni </span><span class="si">{vni}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="mi">2</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">Input</span><span class="p">(</span><span class="n">AntaTest</span><span class="o">.</span><span class="n">Input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Input model for the VerifyEVPNType2Route test.&quot;&quot;&quot;</span>

        <span class="n">vxlan_endpoints</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">VxlanEndpoint</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of VXLAN endpoints to verify.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">VxlanEndpoint</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Model for a VXLAN endpoint.&quot;&quot;&quot;</span>

            <span class="n">address</span><span class="p">:</span> <span class="n">IPv4Address</span> <span class="o">|</span> <span class="n">MacAddress</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;IPv4 or MAC address of the VXLAN endpoint.&quot;&quot;&quot;</span>
            <span class="n">vni</span><span class="p">:</span> <span class="n">Vni</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;VNI of the VXLAN endpoint.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">AntaTemplate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">AntaCommand</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the template for each VXLAN endpoint in the input list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">endpoint</span><span class="o">.</span><span class="n">address</span><span class="p">),</span> <span class="n">vni</span><span class="o">=</span><span class="n">endpoint</span><span class="o">.</span><span class="n">vni</span><span class="p">)</span> <span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">vxlan_endpoints</span><span class="p">]</span>

    <span class="nd">@AntaTest</span><span class="o">.</span><span class="n">anta_test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main test function for VerifyEVPNType2Route.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_success</span><span class="p">()</span>
        <span class="n">no_evpn_routes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bad_evpn_routes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_commands</span><span class="p">:</span>
            <span class="n">address</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">address</span>
            <span class="n">vni</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vni</span>
            <span class="c1"># Verify that the VXLAN endpoint is in the BGP EVPN table</span>
            <span class="n">evpn_routes</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">json_output</span><span class="p">[</span><span class="s2">&quot;evpnRoutes&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">evpn_routes</span><span class="p">:</span>
                <span class="n">no_evpn_routes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">address</span><span class="p">,</span> <span class="n">vni</span><span class="p">))</span>
                <span class="k">continue</span>
            <span class="c1"># Verify that each EVPN route has at least one valid and active path</span>
            <span class="k">for</span> <span class="n">route</span><span class="p">,</span> <span class="n">route_data</span> <span class="ow">in</span> <span class="n">evpn_routes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">has_active_path</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">route_data</span><span class="p">[</span><span class="s2">&quot;evpnRoutePaths&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;routeType&quot;</span><span class="p">][</span><span class="s2">&quot;valid&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;routeType&quot;</span><span class="p">][</span><span class="s2">&quot;active&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="c1"># At least one path is valid and active, no need to check the other paths</span>
                        <span class="n">has_active_path</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">has_active_path</span><span class="p">:</span>
                    <span class="n">bad_evpn_routes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">no_evpn_routes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The following VXLAN endpoint do not have any EVPN Type-2 route: </span><span class="si">{</span><span class="n">no_evpn_routes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bad_evpn_routes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">is_failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The following EVPN Type-2 routes do not have at least one valid and active path: </span><span class="si">{</span><span class="n">bad_evpn_routes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
  </details>
    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="anta.tests.routing.bgp._add_bgp_failures" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_add_bgp_failures</span>


<a href="#anta.tests.routing.bgp._add_bgp_failures" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span> <span class="n">afi</span><span class="p">:</span> <span class="n">Afi</span><span class="p">,</span> <span class="n">safi</span><span class="p">:</span> <span class="n">Safi</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">issue</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">
  
        <p>Add a BGP failure entry to the given <code>failures</code> dictionary.</p>
<p>Note: This function modifies <code>failures</code> in-place.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>failures</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None], <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary to which the failure will be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>afi</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="anta.custom_types.Afi" href="../types/#anta.custom_types.Afi">Afi</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The address family identifier.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vrf</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The VRF name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>safi</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="anta.custom_types.Safi" href="../types/#anta.custom_types.Safi">Safi</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The subsequent address family identifier.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>issue</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A description of the issue. Can be of any type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>The <code>failures</code> dictionary will have the following structure:
<div class="highlight"><pre><span></span><code>{
    (&#39;afi1&#39;, &#39;safi1&#39;): {
        &#39;afi&#39;: &#39;afi1&#39;,
        &#39;safi&#39;: &#39;safi1&#39;,
        &#39;vrfs&#39;: {
            &#39;vrf1&#39;: issue1,
            &#39;vrf2&#39;: issue2
        }
    },
    (&#39;afi2&#39;, None): {
        &#39;afi&#39;: &#39;afi2&#39;,
        &#39;vrfs&#39;: {
            &#39;vrf1&#39;: issue3
        }
    }
}
</code></pre></div></p>
</details>
            <details class="quote">
              <summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_add_bgp_failures</span><span class="p">(</span><span class="n">failures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span> <span class="n">afi</span><span class="p">:</span> <span class="n">Afi</span><span class="p">,</span> <span class="n">safi</span><span class="p">:</span> <span class="n">Safi</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">issue</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a BGP failure entry to the given `failures` dictionary.</span>

<span class="sd">    Note: This function modifies `failures` in-place.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    failures</span>
<span class="sd">        The dictionary to which the failure will be added.</span>
<span class="sd">    afi</span>
<span class="sd">        The address family identifier.</span>
<span class="sd">    vrf</span>
<span class="sd">        The VRF name.</span>
<span class="sd">    safi</span>
<span class="sd">        The subsequent address family identifier.</span>
<span class="sd">    issue</span>
<span class="sd">        A description of the issue. Can be of any type.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    The `failures` dictionary will have the following structure:</span>
<span class="sd">    ```</span>
<span class="sd">    {</span>
<span class="sd">        (&#39;afi1&#39;, &#39;safi1&#39;): {</span>
<span class="sd">            &#39;afi&#39;: &#39;afi1&#39;,</span>
<span class="sd">            &#39;safi&#39;: &#39;safi1&#39;,</span>
<span class="sd">            &#39;vrfs&#39;: {</span>
<span class="sd">                &#39;vrf1&#39;: issue1,</span>
<span class="sd">                &#39;vrf2&#39;: issue2</span>
<span class="sd">            }</span>
<span class="sd">        },</span>
<span class="sd">        (&#39;afi2&#39;, None): {</span>
<span class="sd">            &#39;afi&#39;: &#39;afi2&#39;,</span>
<span class="sd">            &#39;vrfs&#39;: {</span>
<span class="sd">                &#39;vrf1&#39;: issue3</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">afi</span><span class="p">,</span> <span class="n">safi</span><span class="p">)</span>

    <span class="n">failure_entry</span> <span class="o">=</span> <span class="n">failures</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;afi&quot;</span><span class="p">:</span> <span class="n">afi</span><span class="p">,</span> <span class="s2">&quot;safi&quot;</span><span class="p">:</span> <span class="n">safi</span><span class="p">,</span> <span class="s2">&quot;vrfs&quot;</span><span class="p">:</span> <span class="p">{}})</span> <span class="k">if</span> <span class="n">safi</span> <span class="k">else</span> <span class="n">failures</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;afi&quot;</span><span class="p">:</span> <span class="n">afi</span><span class="p">,</span> <span class="s2">&quot;vrfs&quot;</span><span class="p">:</span> <span class="p">{}})</span>

    <span class="n">failure_entry</span><span class="p">[</span><span class="s2">&quot;vrfs&quot;</span><span class="p">][</span><span class="n">vrf</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="anta.tests.routing.bgp._add_bgp_routes_failure" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_add_bgp_routes_failure</span>


<a href="#anta.tests.routing.bgp._add_bgp_routes_failure" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_add_bgp_routes_failure</span><span class="p">(</span><span class="n">bgp_routes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">bgp_output</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">peer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">route_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;advertised_routes&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]]</span>
</code></pre></div>

    <div class="doc doc-contents ">
  
        <p>Identify missing BGP routes and invalid or inactive route entries.</p>
<p>This function checks the BGP output from the device against the expected routes.</p>
<p>It identifies any missing routes as well as any routes that are invalid or inactive. The results are returned in a dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>bgp_routes</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of expected routes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>bgp_output</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The BGP output from the device.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>peer</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The IP address of the BGP peer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vrf</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the VRF for which the routes need to be verified.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>route_type</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of BGP routes. Defaults to &lsquo;advertised_routes&rsquo;.</p>
              </div>
            </td>
            <td>
                  <code>&#39;advertised_routes&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the missing routes and invalid or inactive routes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_add_bgp_routes_failure</span><span class="p">(</span>
    <span class="n">bgp_routes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">bgp_output</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">peer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vrf</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">route_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;advertised_routes&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Identify missing BGP routes and invalid or inactive route entries.</span>

<span class="sd">    This function checks the BGP output from the device against the expected routes.</span>

<span class="sd">    It identifies any missing routes as well as any routes that are invalid or inactive. The results are returned in a dictionary.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bgp_routes</span>
<span class="sd">        The list of expected routes.</span>
<span class="sd">    bgp_output</span>
<span class="sd">        The BGP output from the device.</span>
<span class="sd">    peer</span>
<span class="sd">        The IP address of the BGP peer.</span>
<span class="sd">    vrf</span>
<span class="sd">        The name of the VRF for which the routes need to be verified.</span>
<span class="sd">    route_type</span>
<span class="sd">        The type of BGP routes. Defaults to &#39;advertised_routes&#39;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict[str, dict[str, dict[str, dict[str, list[str]]]]]</span>
<span class="sd">        A dictionary containing the missing routes and invalid or inactive routes.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Prepare the failure routes dictionary</span>
    <span class="n">failure_routes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Iterate over the expected BGP routes</span>
    <span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">bgp_routes</span><span class="p">:</span>
        <span class="n">str_route</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
        <span class="n">failure</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">peer</span><span class="p">:</span> <span class="p">{</span><span class="n">vrf</span><span class="p">:</span> <span class="p">{</span><span class="n">route_type</span><span class="p">:</span> <span class="p">{}}}}}</span>

        <span class="c1"># Check if the route is missing in the BGP output</span>
        <span class="k">if</span> <span class="n">str_route</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bgp_output</span><span class="p">:</span>
            <span class="c1"># If missing, add it to the failure routes dictionary</span>
            <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">][</span><span class="n">route_type</span><span class="p">][</span><span class="n">str_route</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Not found&quot;</span>
            <span class="n">failure_routes</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failure_routes</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># Check if the route is active and valid</span>
        <span class="n">is_active</span> <span class="o">=</span> <span class="n">bgp_output</span><span class="p">[</span><span class="n">str_route</span><span class="p">][</span><span class="s2">&quot;bgpRoutePaths&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;routeType&quot;</span><span class="p">][</span><span class="s2">&quot;valid&quot;</span><span class="p">]</span>
        <span class="n">is_valid</span> <span class="o">=</span> <span class="n">bgp_output</span><span class="p">[</span><span class="n">str_route</span><span class="p">][</span><span class="s2">&quot;bgpRoutePaths&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;routeType&quot;</span><span class="p">][</span><span class="s2">&quot;active&quot;</span><span class="p">]</span>

        <span class="c1"># If the route is either inactive or invalid, add it to the failure routes dictionary</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_active</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid</span><span class="p">:</span>
            <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;bgp_peers&quot;</span><span class="p">][</span><span class="n">peer</span><span class="p">][</span><span class="n">vrf</span><span class="p">][</span><span class="n">route_type</span><span class="p">][</span><span class="n">str_route</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;valid&quot;</span><span class="p">:</span> <span class="n">is_valid</span><span class="p">,</span> <span class="s2">&quot;active&quot;</span><span class="p">:</span> <span class="n">is_active</span><span class="p">}</span>
            <span class="n">failure_routes</span> <span class="o">=</span> <span class="n">deep_update</span><span class="p">(</span><span class="n">failure_routes</span><span class="p">,</span> <span class="n">failure</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">failure_routes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="anta.tests.routing.bgp._check_peer_issues" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_check_peer_issues</span>


<a href="#anta.tests.routing.bgp._check_peer_issues" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_check_peer_issues</span><span class="p">(</span><span class="n">peer_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">
  
        <p>Check for issues in BGP peer data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>peer_data</code></td>
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The BGP peer data dictionary nested in the <code>show bgp &lt;afi&gt; &lt;safi&gt; summary</code> command.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with keys indicating issues or an empty dictionary if no issues.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any of the required keys (&ldquo;peerState&rdquo;, &ldquo;inMsgQueue&rdquo;, &ldquo;outMsgQueue&rdquo;) are missing in <code>peer_data</code>, i.e. invalid BGP peer data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>This can for instance return
<div class="highlight"><pre><span></span><code>{&quot;peerNotFound&quot;: True}
{&quot;peerState&quot;: &quot;Idle&quot;, &quot;inMsgQueue&quot;: 2, &quot;outMsgQueue&quot;: 0}
{}
</code></pre></div></p>
</details>
            <details class="quote">
              <summary>Source code in <code>anta/tests/routing/bgp.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">_check_peer_issues</span><span class="p">(</span><span class="n">peer_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check for issues in BGP peer data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    peer_data</span>
<span class="sd">        The BGP peer data dictionary nested in the `show bgp &lt;afi&gt; &lt;safi&gt; summary` command.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        Dictionary with keys indicating issues or an empty dictionary if no issues.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If any of the required keys (&quot;peerState&quot;, &quot;inMsgQueue&quot;, &quot;outMsgQueue&quot;) are missing in `peer_data`, i.e. invalid BGP peer data.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    This can for instance return</span>
<span class="sd">    ```</span>
<span class="sd">    {&quot;peerNotFound&quot;: True}</span>
<span class="sd">    {&quot;peerState&quot;: &quot;Idle&quot;, &quot;inMsgQueue&quot;: 2, &quot;outMsgQueue&quot;: 0}</span>
<span class="sd">    {}</span>
<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">peer_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;peerNotFound&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">peer_data</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;peerState&quot;</span><span class="p">,</span> <span class="s2">&quot;inMsgQueue&quot;</span><span class="p">,</span> <span class="s2">&quot;outMsgQueue&quot;</span><span class="p">]):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Provided BGP peer data is invalid.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">peer_data</span><span class="p">[</span><span class="s2">&quot;peerState&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Established&quot;</span> <span class="ow">or</span> <span class="n">peer_data</span><span class="p">[</span><span class="s2">&quot;inMsgQueue&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">peer_data</span><span class="p">[</span><span class="s2">&quot;outMsgQueue&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;peerState&quot;</span><span class="p">:</span> <span class="n">peer_data</span><span class="p">[</span><span class="s2">&quot;peerState&quot;</span><span class="p">],</span> <span class="s2">&quot;inMsgQueue&quot;</span><span class="p">:</span> <span class="n">peer_data</span><span class="p">[</span><span class="s2">&quot;inMsgQueue&quot;</span><span class="p">],</span> <span class="s2">&quot;outMsgQueue&quot;</span><span class="p">:</span> <span class="n">peer_data</span><span class="p">[</span><span class="s2">&quot;outMsgQueue&quot;</span><span class="p">]}</span>

    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">March 20, 2024</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2024 Arista Networks
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/aristanetworks/anta" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/aristanetworks/anta/pkgs/container/anta" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/anta/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.top", "content.tabs.link", "content.code.copy", "toc.follow", "navigation.indexes", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": ["stable"], "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "fade", "closeEffect": "fade", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>